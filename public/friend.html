<!DOCTYPE html>
<html>
<head>
  <title>Online Tic Tac Toe</title>
  <link rel="stylesheet" href="style.css">
</head>

<body class="dark center-screen">

  <div class="particles"></div>
  <div class="glass-container">

    <h1 class="title">Play Online</h1>
    <p class="subtitle">Create a room or join your friend</p>

    <div class="card-grid two">

      <!-- CREATE ROOM -->
      <div class="glass-card" onclick="createRoom()">
        <h2>ğŸ®</h2>
        <h3>Create Room</h3>
        <input id="username" placeholder="Your name" />
        <p class="hint">Share room code with friend</p>
      </div>

      <!-- JOIN ROOM -->
      <div class="glass-card" onclick="joinRoom()">
        <h2>ğŸ”‘</h2>
        <h3>Join Room</h3>
        <input id="joinName" placeholder="Your name" />
        <input id="code" placeholder="Room code" />
        <p class="hint">Enter code provided by friend</p>
      </div>

    </div>

    <p id="status" class="status-text"></p>

  </div>

  <script src="/socket.io/socket.io.js"></script>

  <script>
    const socket = io();
    const status = document.getElementById("status");

    socket.on("connect", () => {
      status.innerText = "Connected to server âœ…";
    });

    function createRoom() {
      const name = document.getElementById("username").value;
      if (!name) {
        alert("Enter your name");
        return;
      }
      socket.emit("createRoom", name);
    }

    function joinRoom() {
      const name = document.getElementById("joinName").value;
      const code = document.getElementById("code").value.toUpperCase();

      if (!name || !code) {
        alert("Enter name and room code");
        return;
      }

      socket.emit("joinRoom", { code, username: name });
    }

    socket.on("roomCreated", ({ code, symbol }) => {
      localStorage.setItem("roomCode", code);
      localStorage.setItem("symbol", symbol);
      status.innerHTML = `
      Room Code: <b>${code}</b>
      <button onclick="copyCode('${code}')">Copy</button>
`;

    });

    socket.on("startOnlineGame", () => {
      location.href = "online-game.html";
    });

    socket.on("invalidRoom", () => {
      status.innerText = "Invalid or full room âŒ";
    });

    function copyCode(code) {
      navigator.clipboard.writeText(code);
      status.innerText = "Room code copied âœ…";
    }

  </script>



</body>
</html>
